<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<body>

  <!-- 
    ====================================================================================
      FRAGMENTO RESPONSIVE PARA LA TARJETA DE PRODUCTO FÍSICO
    ====================================================================================
  -->
  <div th:fragment="producto-fisico-card(producto)">
    <div class="col h-100">

      <!--
        =========================================================
          VERSIÓN ESCRITORIO (CARD VERTICAL)
          - Visible solo en pantallas grandes (lg) y superiores.
        =========================================================
      -->
      <div class="card h-100 position-relative overflow-hidden custom-card bg-info d-none d-lg-block">
        <a th:href="@{/tienda/productoFisico/{id}(id=${producto.id})}" class="text-decoration-none">
          <div class="card-header p-0 position-relative">
            <!-- Lógica de imagen -->
            <img th:if="${#strings.isEmpty(producto.imagenUrl)}" th:src="@{/img/default.webp}" class="card-img-top" alt="Imagen por defecto">
            <img th:unless="${#strings.isEmpty(producto.imagenUrl)}" th:src="${producto.imagenUrl}" class="card-img-top" th:alt="${producto.nombre}">
          </div>
          <div class="card-body position-relative bg-info text-white p-3">
            <!-- Información específica del producto físico -->
            <p class="card-text small mb-1" th:text="'Vendido por: ' + ${producto.vendedor?.nombre}"></p>
            <h6 class="card-title" th:text="${producto.nombre}"></h6>
            <span class="fw-bold" th:text="${producto.precio} + ' €'"></span>
          </div>
        </a>
        <!--
          ACCIÓN: Comprar Ahora
          Un único botón que lleva al flujo de compra directa.
        -->
        <div class="card-actions position-absolute bottom-0 start-0 w-100 text-center bg-info p-2">
          <a th:href="@{/comprar/fisico/{id}(id=${producto.id})}" class="btn btn-sm btn-success w-100 text-white">Comprar Ahora</a>
        </div>
      </div>


      <!--
        =========================================================
          VERSIÓN MÓVIL (LISTA HORIZONTAL)
          - Visible solo en pantallas medianas e inferiores (hasta lg).
        =========================================================
      -->
      <div class="card bg-info h-100 p-2 d-block d-lg-none">
        <div class="d-flex align-items-center h-100">
          
          <!-- Columna Izquierda: Imagen -->
          <a th:href="@{/tienda/productoFisico/{id}(id=${producto.id})}" class="flex-shrink-0">
            <img th:if="${#strings.isEmpty(producto.imagenUrl)}" th:src="@{/img/default.webp}" alt="Imagen por defecto" style="width: 80px; height: 80px; object-fit: cover; border-radius: 8px;">
            <img th:unless="${#strings.isEmpty(producto.imagenUrl)}" th:src="${producto.imagenUrl}" th:alt="${producto.nombre}" style="width: 80px; height: 80px; object-fit: cover; border-radius: 8px;">
          </a>
          
          <!-- Columna Central: Información -->
          <a th:href="@{/tienda/productoFisico/{id}(id=${producto.id})}" class="flex-grow-1 mx-3 text-white text-decoration-none">
            <p class="small mb-0 text-white-50" th:text="'Vendido por: ' + ${producto.vendedor?.nombre}"></p>
            <h6 class="mb-1" th:text="${producto.nombre}"></h6>
            <span class="fw-bold" th:text="${producto.precio} + ' €'"></span>
          </a>

          <!-- Columna Derecha: Botón de Comprar Ahora -->
          <div class="flex-shrink-0">
            <a th:href="@{/comprar/fisico/{id}(id=${producto.id})}" class="btn btn-success text-white">
                <i class="bi bi-bag-check-fill fs-4"></i>
            </a>
          </div>

        </div>
      </div>

    </div>
  </div>

</body>
</html>